p8105\_hw5\_niz2000
================
Nora Zakaria
11/11/2019

# Problem 1

## Load Tidyverse and the Iris Data

``` r
library(tidyverse)
```

    ## ── Attaching packages ────────────────────── tidyverse 1.2.1 ──

    ## ✔ ggplot2 3.2.1     ✔ purrr   0.3.2
    ## ✔ tibble  2.1.3     ✔ dplyr   0.8.3
    ## ✔ tidyr   1.0.0     ✔ stringr 1.4.0
    ## ✔ readr   1.3.1     ✔ forcats 0.4.0

    ## ── Conflicts ───────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()

``` r
set.seed(10)

iris_with_missing = iris %>% 
  map_df(~replace(.x, sample(1:150, 20), NA)) %>%
  mutate(Species = as.character(Species))
iris_with_missing
```

    ## # A tibble: 150 x 5
    ##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
    ##           <dbl>       <dbl>        <dbl>       <dbl> <chr>  
    ##  1          5.1         3.5          1.4         0.2 setosa 
    ##  2          4.9         3            1.4         0.2 setosa 
    ##  3          4.7         3.2          1.3         0.2 setosa 
    ##  4          4.6         3.1          1.5        NA   setosa 
    ##  5          5           3.6          1.4         0.2 setosa 
    ##  6          5.4         3.9          1.7         0.4 setosa 
    ##  7         NA           3.4          1.4         0.3 setosa 
    ##  8          5           3.4          1.5         0.2 setosa 
    ##  9          4.4         2.9          1.4         0.2 setosa 
    ## 10          4.9         3.1         NA           0.1 setosa 
    ## # … with 140 more rows

## Function to Replace Missing Values

``` r
replace_missing = function(x) {
  if (is.numeric(x)) {
    ifelse(is.na(x), mean(x, na.rm = TRUE), x)
  } else if (is.character(x)) {
    ifelse(is.na(x), "virginica", x)
  }
}
iris_complete = map_df(iris_with_missing, replace_missing)
iris_complete
```

    ## # A tibble: 150 x 5
    ##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
    ##           <dbl>       <dbl>        <dbl>       <dbl> <chr>  
    ##  1         5.1          3.5         1.4         0.2  setosa 
    ##  2         4.9          3           1.4         0.2  setosa 
    ##  3         4.7          3.2         1.3         0.2  setosa 
    ##  4         4.6          3.1         1.5         1.19 setosa 
    ##  5         5            3.6         1.4         0.2  setosa 
    ##  6         5.4          3.9         1.7         0.4  setosa 
    ##  7         5.82         3.4         1.4         0.3  setosa 
    ##  8         5            3.4         1.5         0.2  setosa 
    ##  9         4.4          2.9         1.4         0.2  setosa 
    ## 10         4.9          3.1         3.77        0.1  setosa 
    ## # … with 140 more rows

# Problem 2

## Load in the HW 5 Zipfile Data

``` r
data_df = tibble(
  participant = list.files(path = "./data")
)
data_df
```

    ## # A tibble: 20 x 1
    ##    participant
    ##    <chr>      
    ##  1 con_01.csv 
    ##  2 con_02.csv 
    ##  3 con_03.csv 
    ##  4 con_04.csv 
    ##  5 con_05.csv 
    ##  6 con_06.csv 
    ##  7 con_07.csv 
    ##  8 con_08.csv 
    ##  9 con_09.csv 
    ## 10 con_10.csv 
    ## 11 exp_01.csv 
    ## 12 exp_02.csv 
    ## 13 exp_03.csv 
    ## 14 exp_04.csv 
    ## 15 exp_05.csv 
    ## 16 exp_06.csv 
    ## 17 exp_07.csv 
    ## 18 exp_08.csv 
    ## 19 exp_09.csv 
    ## 20 exp_10.csv

## Iterate over Files Names

``` r
data_df = function(path){
  case_control_df = read_csv(path)
  case_control_df 
}
directory = "./data"
study_df = tibble(
  observation = list.files(path = "./data"),
    files = str_c(directory, "/",observation)) %>%
  mutate(
    weekly_data = map(files, read_csv),
    observation = str_replace(observation, ".csv","")) %>%
  unnest() %>%
  mutate(
    study_arm = if_else(observation %in% c("con_01", "con_02", "con_03", "con_04",
        "con_05", "con_06", "con_07", "con_08", "con_09", "con_10"), "control", observation),
    study_arm = if_else(study_arm %in% c("exp_01", "exp_02", "exp_03", "exp_04",
        "exp_05", "exp_06", "exp_07", "exp_08", "exp_09", "exp_10"), "experimental", study_arm))
```

    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )

    ## Warning: `cols` is now required.
    ## Please use `cols = c(weekly_data)`

``` r
study_df
```

    ## # A tibble: 20 x 11
    ##    observation files week_1 week_2 week_3 week_4 week_5 week_6 week_7
    ##    <chr>       <chr>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>
    ##  1 con_01      ./da…   0.2  -1.31    0.66   1.96   0.23   1.09   0.05
    ##  2 con_02      ./da…   1.13 -0.88    1.07   0.17  -0.83  -0.31   1.58
    ##  3 con_03      ./da…   1.77  3.11    2.22   3.26   3.31   0.89   1.88
    ##  4 con_04      ./da…   1.04  3.66    1.22   2.33   1.47   2.7    1.87
    ##  5 con_05      ./da…   0.47 -0.580  -0.09  -1.37  -0.32  -2.17   0.45
    ##  6 con_06      ./da…   2.37  2.5     1.59  -0.16   2.08   3.07   0.78
    ##  7 con_07      ./da…   0.03  1.21    1.13   0.64   0.49  -0.12  -0.07
    ##  8 con_08      ./da…  -0.08  1.42    0.09   0.36   1.18  -1.16   0.33
    ##  9 con_09      ./da…   0.08  1.24    1.44   0.41   0.95   2.75   0.3 
    ## 10 con_10      ./da…   2.14  1.15    2.52   3.44   4.26   0.97   2.73
    ## 11 exp_01      ./da…   3.05  3.67    4.84   5.8    6.33   5.46   6.38
    ## 12 exp_02      ./da…  -0.84  2.63    1.64   2.58   1.24   2.32   3.11
    ## 13 exp_03      ./da…   2.15  2.08    1.82   2.84   3.36   3.61   3.37
    ## 14 exp_04      ./da…  -0.62  2.54    3.78   2.73   4.49   5.82   6   
    ## 15 exp_05      ./da…   0.7   3.33    5.34   5.57   6.9    6.66   6.24
    ## 16 exp_06      ./da…   3.73  4.08    5.4    6.41   4.87   6.09   7.66
    ## 17 exp_07      ./da…   1.18  2.35    1.23   1.17   2.02   1.61   3.13
    ## 18 exp_08      ./da…   1.37  1.43    1.84   3.6    3.8    4.72   4.68
    ## 19 exp_09      ./da…  -0.4   1.08    2.66   2.7    2.8    2.64   3.51
    ## 20 exp_10      ./da…   1.09  2.8     2.8    4.3    2.25   6.57   6.09
    ## # … with 2 more variables: week_8 <dbl>, study_arm <chr>

\#pivot\_longer( \#week\_1:week\_8, \#names\_to = “weekly\_data”,
\#values\_to = “activity”)
